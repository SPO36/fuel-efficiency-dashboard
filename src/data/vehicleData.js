export const VEHICLE_DATA = [
  // 07:30 - 시동 걸기 (엔진 시작)
  {
    timestamp: "07:30:00",
    efficiency: 3,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Bad",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:30:30 - 워밍업 중
  {
    timestamp: "07:30:30",
    efficiency: 5,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Bad",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:31:00 - 워밍업 계속
  {
    timestamp: "07:31:00",
    efficiency: 8,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Bad",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:31:30 - 출발 준비 (기어 변속)
  {
    timestamp: "07:31:30",
    efficiency: 12,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:32:00 - 천천히 출발 (저속)
  {
    timestamp: "07:32:00",
    efficiency: 25,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:32:30 - 주택가 저속 주행
  {
    timestamp: "07:32:30",
    efficiency: 35,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:33:00 - 시내 도로 진입
  {
    timestamp: "07:33:00",
    efficiency: 42,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:33:30 - 시내 안정 주행
  {
    timestamp: "07:33:30",
    efficiency: 46,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:34:00 - 시내 계속 주행
  {
    timestamp: "07:34:00",
    efficiency: 48,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:34:30 - 시내 안정 주행
  {
    timestamp: "07:34:30",
    efficiency: 48,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:35:00 - 간선도로 진입
  {
    timestamp: "07:35:00",
    efficiency: 55,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:35:30 - 고속도로 진입로
  {
    timestamp: "07:35:30",
    efficiency: 62,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:36:00 - 고속도로 가속 차선
  {
    timestamp: "07:36:00",
    efficiency: 68,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:36:30 - 크루즈 컨트롤 준비
  {
    timestamp: "07:36:30",
    efficiency: 72,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:37:00 - 크루즈 컨트롤 ON!
  {
    timestamp: "07:37:00",
    efficiency: 78,
    tirePressure: "Good",
    cruiseControl: "ON",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:37:30 - 크루즈 안정화
  {
    timestamp: "07:37:30",
    efficiency: 82,
    tirePressure: "Good",
    cruiseControl: "ON",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:38:00 - 크루즈 최적 상태
  {
    timestamp: "07:38:00",
    efficiency: 85,
    tirePressure: "Good",
    cruiseControl: "ON",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:38:30 - 앞 차량 발견, 속도 조정
  {
    timestamp: "07:38:30",
    efficiency: 80,
    tirePressure: "Good",
    cruiseControl: "ON",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:39:00 - 교통량 증가, 크루즈 해제
  {
    timestamp: "07:39:00",
    efficiency: 65,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Bad",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:39:30 - 교통 정체 시작
  {
    timestamp: "07:39:30",
    efficiency: 45,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Bad",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Bad",
    suddenDeceleration: "Bad",
    vehicleSpeeding: "Good",
  },
  // 07:40:00 - 서행 운전
  {
    timestamp: "07:40:00",
    efficiency: 32,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Bad",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Bad",
    suddenDeceleration: "Bad",
    vehicleSpeeding: "Good",
  },
  // 07:40:30 - 잦은 정차 시작
  {
    timestamp: "07:40:30",
    efficiency: 22,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Bad",
    trafficSituation: "Bad",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Bad",
    suddenDeceleration: "Bad",
    vehicleSpeeding: "Good",
  },
  // 07:41:00 - 정체 지속
  {
    timestamp: "07:41:00",
    efficiency: 18,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Bad",
    trafficSituation: "Bad",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Bad",
    suddenDeceleration: "Bad",
    vehicleSpeeding: "Good",
  },
  // 07:41:30 - 극심한 정체
  {
    timestamp: "07:41:30",
    efficiency: 12,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Bad",
    trafficSituation: "Bad",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Bad",
    suddenDeceleration: "Bad",
    vehicleSpeeding: "Good",
  },
  // 07:42:00 - 정체 완화 조짐
  {
    timestamp: "07:42:00",
    efficiency: 28,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Bad",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Bad",
    suddenDeceleration: "Bad",
    vehicleSpeeding: "Good",
  },
  // 07:42:30 - 서행하며 이동
  {
    timestamp: "07:42:30",
    efficiency: 35,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Bad",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:43:00 - 정체 해소!
  {
    timestamp: "07:43:00",
    efficiency: 45,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:43:30 - 다시 고속도로 복귀
  {
    timestamp: "07:43:30",
    efficiency: 58,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:44:00 - 고속도로 안정 주행
  {
    timestamp: "07:44:00",
    efficiency: 68,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:44:30 - 다시 크루즈 컨트롤 ON
  {
    timestamp: "07:44:30",
    efficiency: 75,
    tirePressure: "Good",
    cruiseControl: "ON",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:45:00 - 크루즈 최고 효율
  {
    timestamp: "07:45:00",
    efficiency: 88,
    tirePressure: "Good",
    cruiseControl: "ON",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:45:30 - 회사 도착 준비 (출구)
  {
    timestamp: "07:45:30",
    efficiency: 72,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:46:00 - 회사 앞 도로
  {
    timestamp: "07:46:00",
    efficiency: 52,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:46:30 - 주차장 진입
  {
    timestamp: "07:46:30",
    efficiency: 35,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Bad",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
  // 07:47:00 - 주차 자리 찾기
  {
    timestamp: "07:47:00",
    efficiency: 18,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Bad",
    trafficSituation: "Bad",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Bad",
    suddenDeceleration: "Bad",
    vehicleSpeeding: "Good",
  },
  // 07:47:30 - 주차 시도
  {
    timestamp: "07:47:30",
    efficiency: 8,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Bad",
    trafficSituation: "Bad",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Bad",
    suddenDeceleration: "Bad",
    vehicleSpeeding: "Good",
  },
  // 07:48:00 - 주차 완료, 시동 종료 전
  {
    timestamp: "07:48:00",
    efficiency: 4,
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Bad",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  },
];

// 정적 데이터도 현실적으로 수정
export const getStaticData = (period) => {
  const baseStatus = {
    tirePressure: "Good",
    cruiseControl: "OFF",
    vehicleIdling: "Good",
    trafficSituation: "Good",
    weather: "Good",
    roadSlope: "Good",
    suddenAcceleration: "Good",
    suddenDeceleration: "Good",
    vehicleSpeeding: "Good",
  };

  const raw = {
    today: [
      {
        timestamp: "07:30",
        efficiency: 8,
        ...baseStatus,
        vehicleIdling: "Bad",
      },
      {
        timestamp: "07:45",
        efficiency: 35,
        ...baseStatus,
      },
      {
        timestamp: "08:00",
        efficiency: 18,
        ...baseStatus,
        vehicleIdling: "Bad",
        trafficSituation: "Bad",
        suddenAcceleration: "Bad",
        suddenDeceleration: "Bad",
      },
      {
        timestamp: "08:15",
        efficiency: 85,
        ...baseStatus,
        cruiseControl: "ON",
      },
      {
        timestamp: "12:00",
        efficiency: 55,
        ...baseStatus,
      },
      {
        timestamp: "12:30",
        efficiency: 78,
        ...baseStatus,
        cruiseControl: "ON",
      },
      {
        timestamp: "18:00",
        efficiency: 15,
        ...baseStatus,
        trafficSituation: "Bad",
        vehicleIdling: "Bad",
        suddenAcceleration: "Bad",
        suddenDeceleration: "Bad",
      },
    ],
    week: [
      { timestamp: "Mon", efficiency: 35, trafficSituation: "Bad" },
      { timestamp: "Tue", efficiency: 38, weather: "Bad" },
      { timestamp: "Wed", efficiency: 36, cruiseControl: "ON" },
      { timestamp: "Thu", efficiency: 40 },
      { timestamp: "Fri", efficiency: 32, suddenAcceleration: "Bad" },
      {
        timestamp: "Sat",
        efficiency: 82,
        cruiseControl: "ON",
        roadSlope: "Good",
      },
      { timestamp: "Sun", efficiency: 65 },
    ].map((d) => ({
      ...baseStatus,
      ...d,
    })),
    month: Array.from({ length: 30 }, (_, i) => {
      const day = i + 1;
      const isWeekend = day % 7 === 6 || day % 7 === 0; // 토, 일

      const efficiency = isWeekend
        ? 65 + Math.round(Math.random() * 10) // 주말엔 교외 주행
        : 28 + Math.round(Math.random() * 15); // 평일엔 시내 출퇴근

      return {
        timestamp: `${day}`,
        efficiency,
        tirePressure: "Good",
        cruiseControl: efficiency >= 60 ? "ON" : "OFF",
        vehicleIdling: efficiency < 30 ? "Bad" : "Good",
        trafficSituation: isWeekend ? "Good" : efficiency < 35 ? "Bad" : "Good",
        weather: "Good",
        roadSlope: "Good",
        suddenAcceleration: efficiency < 35 ? "Bad" : "Good",
        suddenDeceleration: efficiency < 35 ? "Bad" : "Good",
        vehicleSpeeding: "Good",
      };
    }),
    year: [
      {
        timestamp: "Jan",
        efficiency: 30,
        weather: "Bad",
        vehicleIdling: "Bad", // 겨울 워밍업
        cruiseControl: "OFF",
      },
      {
        timestamp: "Feb",
        efficiency: 32,
        weather: "Bad",
        vehicleIdling: "Bad",
        cruiseControl: "OFF",
      },
      {
        timestamp: "Mar",
        efficiency: 48,
        weather: "Good",
        cruiseControl: "OFF",
      },
      {
        timestamp: "Apr",
        efficiency: 65,
        weather: "Good",
        cruiseControl: "ON",
      },
      {
        timestamp: "May",
        efficiency: 75,
        weather: "Good",
        cruiseControl: "ON",
      },
      {
        timestamp: "Jun",
        efficiency: 58,
        weather: "Good",
        cruiseControl: "ON",
      },
      {
        timestamp: "Jul",
        efficiency: 42,
        weather: "Bad", // 장마, 에어컨
        cruiseControl: "OFF",
      },
      {
        timestamp: "Aug",
        efficiency: 38,
        weather: "Bad", // 폭염, 에어컨
        cruiseControl: "OFF",
      },
      {
        timestamp: "Sep",
        efficiency: 55,
        weather: "Good",
        cruiseControl: "ON",
      },
      {
        timestamp: "Oct",
        efficiency: 78,
        weather: "Good",
        cruiseControl: "ON",
      },
      {
        timestamp: "Nov",
        efficiency: 48,
        weather: "Good",
        cruiseControl: "OFF",
      },
      {
        timestamp: "Dec",
        efficiency: 32,
        weather: "Bad",
        vehicleIdling: "Bad",
        cruiseControl: "OFF",
      },
    ].map((d) => ({
      ...{
        tirePressure: "Good",
        trafficSituation: d.efficiency < 40 ? "Bad" : "Good",
        roadSlope: "Good",
        suddenAcceleration: d.efficiency < 40 ? "Bad" : "Good",
        suddenDeceleration: d.efficiency < 40 ? "Bad" : "Good",
        vehicleSpeeding: "Good",
        vehicleIdling: "Good",
      },
      ...d,
    })),
  };

  const selectedData = raw[period] || [];

  return selectedData.map((entry) => ({
    time: entry.timestamp,
    efficiency: entry.efficiency,
    fullStatus: entry, // 전체 vehicle 상태 정보
  }));
};

// 상태 섹션 설정
export const STATUS_SECTIONS_CONFIG = [
  {
    title: "Vehicle Status",
    items: [
      {
        icon: "tire-pressure", // tire-pressure.svg
        label: "Tire pressure",
        key: "tirePressure",
        defaultValue: "Good",
      },
      {
        icon: "cruise-control", // cruise-control.svg
        label: "Cruise Control",
        key: "cruiseControl",
        defaultValue: "ON",
      },
      {
        icon: "vehicle-idling", // vehicle-idling.svg
        label: "Vehicle Idling",
        key: "vehicleIdling",
        defaultValue: "Good",
      },
    ],
  },
  {
    title: "Vehicle External Factors",
    items: [
      {
        icon: "traffic-situation", // traffic-situation.svg
        label: "Traffic Situation",
        key: "trafficSituation",
        defaultValue: "Bad",
      },
      {
        icon: "weather", // weather.svg
        label: "Weather",
        key: "weather",
        defaultValue: "Good",
      },
      {
        icon: "road-slope", // road-slope.svg
        label: "Road Slope",
        key: "roadSlope",
        defaultValue: "Good",
      },
    ],
  },
  {
    title: "Driving Habits",
    items: [
      {
        icon: "sudden-acceleration", // sudden-acceleration.svg
        label: "Sudden Acceleration",
        key: "suddenAcceleration",
        defaultValue: "Bad",
      },
      {
        icon: "sudden-deceleration", // sudden-deceleration.svg
        label: "Sudden Deceleration",
        key: "suddenDeceleration",
        defaultValue: "Bad",
      },
      {
        icon: "vehicle-speeding", // vehicle-speeding.svg
        label: "Vehicle Speeding",
        key: "vehicleSpeeding",
        defaultValue: "Good",
      },
    ],
  },
];

// 시간 선택 버튼 설정
export const TIME_PERIODS = [
  { id: "realtime", label: "Real-time", icon: "🔴" },
  { id: "today", label: "Today" },
  { id: "week", label: "Week" },
  { id: "month", label: "Month" },
  { id: "year", label: "Year" },
];

// 차트 설정
export const CHART_CONFIG = {
  height: 320,
  maxDataPoints: 6,
  updateInterval: 800, // 0.75초마다 업데이트 (더 부드러운 애니메이션)
  yAxisDomain: [0, 100],
};

// 상태별 요약 메시지 생성 함수
export const generateStatusSummary = (vehicleData, previousData = null) => {
  const {
    efficiency,
    cruiseControl,
    vehicleIdling,
    trafficSituation,
    weather,
  } = vehicleData;

  // 연비 등급 분류 (3가지 색깔로 단순화)
  const getEfficiencyGrade = (efficiency) => {
    if (efficiency >= 60)
      return { grade: "우수합니다", color: "text-green-400" };
    if (efficiency >= 30)
      return { grade: "보통입니다", color: "text-yellow-400" };
    return { grade: "나쁩니다", color: "text-red-400" };
  };

  // 상황 변화 감지 및 메시지 생성
  const getContextualMessage = () => {
    // 크루즈 컨트롤에서 갑자기 정체로 변한 경우
    if (
      previousData &&
      previousData.cruiseControl === "ON" &&
      cruiseControl === "OFF" &&
      trafficSituation === "Bad"
    ) {
      return `크루즈 컨트롤 중 교통 정체가 발생하여 연료 효율이 ${efficiency}점으로 급격히 하락했습니다.`;
    }

    // 정체에서 크루즈로 전환된 경우
    if (
      previousData &&
      previousData.trafficSituation === "Bad" &&
      cruiseControl === "ON" &&
      trafficSituation === "Good"
    ) {
      return `교통 정체가 해소되어 크루즈 컨트롤로 전환, 연료 효율이 ${efficiency}점으로 개선되었습니다.`;
    }

    // 현재 상태별 기본 메시지
    if (vehicleIdling === "Bad" && trafficSituation === "Bad") {
      return `교통 정체로 정차 중이며, 연료 효율이 ${efficiency}점으로 매우 낮습니다.`;
    }

    if (cruiseControl === "ON" && trafficSituation === "Good") {
      return `크루즈 컨트롤로 안정 주행 중, 연료 효율 ${efficiency}점을 기록하고 있습니다.`;
    }

    if (trafficSituation === "Bad") {
      return `교통 정체 구간에서 잦은 정차로 연료 효율이 ${efficiency}점까지 떨어졌습니다.`;
    }

    if (vehicleIdling === "Bad") {
      return `현재 정차 중이며, 공회전으로 연료 효율이 ${efficiency}점입니다.`;
    }

    return `일반 주행 중이며, 연료 효율 ${efficiency}점을 기록하고 있습니다.`;
  };

  const efficiencyInfo = getEfficiencyGrade(efficiency);
  const message = getContextualMessage();

  return {
    message,
    efficiency: efficiency,
    grade: efficiencyInfo.grade,
    color: efficiencyInfo.color,
    isTransition: previousData ? true : false,
  };
};

// VEHICLE_DATA에 요약 메시지 추가하는 함수
export const addSummaryToVehicleData = () => {
  return VEHICLE_DATA.map((data) => ({
    ...data,
    summary: generateStatusSummary(data),
  }));
};

// 실시간으로 요약 메시지를 생성하는 함수 (이전 데이터 포함)
export const getCurrentSummary = (
  currentVehicleData,
  previousVehicleData = null
) => {
  return generateStatusSummary(currentVehicleData, previousVehicleData);
};

// 미리 정의된 요약 메시지들 (더 다양한 표현)
export const SUMMARY_MESSAGES = {
  excellent: [
    "크루즈 컨트롤로 최적의 연비를 달성하고 있습니다.",
    "원활한 교통 흐름에서 우수한 연비 성능을 보이고 있습니다.",
    "현재 매우 효율적인 주행 상태를 유지하고 있습니다.",
    "고속도로 주행으로 최고 수준의 연비를 기록 중입니다.",
    "이상적인 운전 조건에서 탁월한 연비를 달성했습니다.",
  ],
  good: [
    "양호한 교통 상황에서 우수한 연비를 기록하고 있습니다.",
    "안정적인 주행으로 좋은 연비 성능을 보이고 있습니다.",
    "현재 효율적인 운전 상태를 유지하고 있습니다.",
    "원활한 도로 상황에서 우수한 연비를 달성 중입니다.",
    "균형 잡힌 주행으로 양호한 연비를 기록했습니다.",
  ],
  average: [
    "시내 주행으로 평균적인 연비를 기록하고 있습니다.",
    "일반적인 교통 상황에서 보통 수준의 연비를 보이고 있습니다.",
    "현재 평균적인 연비 성능을 유지하고 있습니다.",
    "도심 주행 특성상 보통 수준의 연비를 달성 중입니다.",
    "표준적인 운전 조건에서 평균 연비를 기록했습니다.",
  ],
  poor: [
    "교통 정체로 인해 연비가 다소 저하되고 있습니다.",
    "정차가 잦은 상황에서 연비 효율이 떨어지고 있습니다.",
    "현재 교통 혼잡으로 연비 성능이 저하된 상태입니다.",
    "잦은 정지로 인해 연비가 평소보다 낮은 상황입니다.",
    "시내 정체 구간에서 연비 효율이 감소하고 있습니다.",
  ],
  critical: [
    "심각한 교통 정체로 연비가 크게 저하되고 있습니다.",
    "장시간 정차로 인해 연비 효율이 매우 낮은 상태입니다.",
    "현재 극심한 교통 체증으로 최악의 연비를 기록 중입니다.",
    "정차 시간이 길어져 연비가 급격히 악화되고 있습니다.",
    "교통 대란 상황에서 연비 성능이 최저 수준입니다.",
  ],
};

// 연비에 따른 메시지 카테고리 선택
export const getSummaryByEfficiency = (efficiency, vehicleData) => {
  let category;

  if (efficiency >= 70) category = "excellent";
  else if (efficiency >= 60) category = "good";
  else if (efficiency >= 50) category = "average";
  else if (efficiency >= 40) category = "poor";
  else category = "critical";

  const messages = SUMMARY_MESSAGES[category];
  const messageIndex =
    Math.floor(Date.now() / (3 * 60 * 1000)) % messages.length;

  return {
    message: messages[messageIndex],
    category,
    efficiency,
    timestamp: new Date().toLocaleTimeString(),
  };
};
